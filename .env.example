# 文档转换调度系统环境配置
# 复刻MediaConvert的配置结构，支持企业级功能

# ===== 应用基础配置 =====
HOST=0.0.0.0
PORT=8000
WORKERS=1
LOG_LEVEL=INFO
LOG_DIR=/app/log_files

# ===== 数据库配置 =====
DATABASE_TYPE=sqlite
DATABASE_URL=sqlite:///./document_tasks.db

# MySQL配置示例（如果使用MySQL）
# DATABASE_TYPE=mysql
# DATABASE_URL=mysql+aiomysql://user:password@localhost:3306/document_tasks

# ===== S3下载配置（输入文件） =====
# 用于下载待转换的文件
S3_ACCESS_KEY_ID=your_access_key_id
S3_SECRET_ACCESS_KEY=your_secret_access_key
S3_ENDPOINT_URL=https://your-s3-endpoint.com
S3_REGION=us-east-1
S3_BUCKET=ai-file

# ===== S3上传配置（输出文件） =====
# 用于上传转换结果，如果不设置则使用通用S3配置
UPLOAD_S3_ACCESS_KEY_ID=your_upload_access_key_id
UPLOAD_S3_SECRET_ACCESS_KEY=your_upload_secret_access_key
UPLOAD_S3_ENDPOINT_URL=https://your-upload-s3-endpoint.com
UPLOAD_S3_REGION=us-east-1
UPLOAD_S3_BUCKET=ai-file

# ===== 工作空间配置 =====
# 与MediaConvert保持一致的目录结构
WORKSPACE_DIR=/app/task_workspace
TEMP_FILES_DIR=/app/temp_files

# ===== 任务处理配置 =====
MAX_CONCURRENT_TASKS=3
TASK_CHECK_INTERVAL=5
MAX_RETRY_COUNT=3

# ===== 文档转换工具配置 =====
LIBREOFFICE_PATH=/usr/bin/libreoffice

# ===== MinerU配置 =====
# GPU相关配置
CUDA_VISIBLE_DEVICES=0
PYTORCH_CUDA_ALLOC_CONF=max_split_size_mb:128

# ===== 文件处理配置 =====
MAX_FILE_SIZE_MB=100
SUPPORTED_OFFICE_FORMATS=.doc,.docx,.xls,.xlsx,.ppt,.pptx,.odt,.ods,.odp,.rtf
SUPPORTED_PDF_FORMATS=.pdf

# ===== 性能调优 =====
WORKER_TIMEOUT=300
CONVERSION_TIMEOUT=600
CLEANUP_INTERVAL=3600

# ===== 监控和统计配置 =====
ENABLE_METRICS=true
METRICS_PORT=9090

# ===== 安全配置 =====
# API访问控制（可选）
API_KEY=your_api_key_here
ALLOWED_ORIGINS=*

# ===== 回调配置 =====
# 默认回调超时时间（秒）
CALLBACK_TIMEOUT=30
# 回调重试次数
CALLBACK_MAX_RETRIES=3

# ===== 开发模式 =====
DEBUG=false
RELOAD=false
