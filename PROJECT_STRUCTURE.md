# æ–‡æ¡£è½¬æ¢è°ƒåº¦ç³»ç»Ÿé¡¹ç›®ç»“æ„

## ğŸ“ é¡¹ç›®ç›®å½•ç»“æ„

```
document-scheduler/
â”œâ”€â”€ ğŸ“„ æ ¸å¿ƒåº”ç”¨æ–‡ä»¶
â”‚   â”œâ”€â”€ start.py                    # åº”ç”¨å¯åŠ¨å…¥å£
â”‚   â”œâ”€â”€ __init__.py                 # PythonåŒ…åˆå§‹åŒ–
â”‚   â””â”€â”€ requirements.txt            # åŸºç¡€Pythonä¾èµ–
â”‚
â”œâ”€â”€ ğŸŒ APIæ¥å£å±‚
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ main.py                 # FastAPIåº”ç”¨ä¸»æ–‡ä»¶
â”‚
â”œâ”€â”€ âš™ï¸ ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ processors/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ task_processor.py       # å¼‚æ­¥ä»»åŠ¡å¤„ç†å™¨
â”‚   â””â”€â”€ services/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ document_service.py     # æ–‡æ¡£è½¬æ¢æœåŠ¡
â”‚
â”œâ”€â”€ ğŸ³ Dockeréƒ¨ç½²æ–‡ä»¶
â”‚   â”œâ”€â”€ Dockerfile                  # åŸå§‹Dockerfile
â”‚   â”œâ”€â”€ Dockerfile.document-scheduler # é€šç”¨ç‰ˆæœ¬Dockerfile
â”‚   â”œâ”€â”€ Dockerfile.cpu              # CPUä¼˜åŒ–ç‰ˆæœ¬
â”‚   â”œâ”€â”€ Dockerfile.gpu              # GPUåŠ é€Ÿç‰ˆæœ¬
â”‚   â”œâ”€â”€ .dockerignore               # Dockeræ„å»ºå¿½ç•¥æ–‡ä»¶
â”‚   â”œâ”€â”€ docker-compose.yml          # åŸå§‹Docker Compose
â”‚   â”œâ”€â”€ docker-compose.document-scheduler.yml # é€šç”¨ç‰ˆæœ¬
â”‚   â”œâ”€â”€ docker-compose.cpu.yml      # CPUç‰ˆæœ¬é…ç½®
â”‚   â”œâ”€â”€ docker-compose.gpu.yml      # GPUç‰ˆæœ¬é…ç½®
â”‚   â””â”€â”€ .env.example                # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”‚
â”œâ”€â”€ ğŸ› ï¸ éƒ¨ç½²å·¥å…·
â”‚   â”œâ”€â”€ deploy.sh                   # æ™ºèƒ½éƒ¨ç½²è„šæœ¬
â”‚   â””â”€â”€ export_image.sh             # é•œåƒå¯¼å‡ºå·¥å…·
â”‚
â”œâ”€â”€ âš™ï¸ é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ mineru.json                 # é»˜è®¤MinerUé…ç½®
â”‚   â”œâ”€â”€ mineru-cpu.json             # CPUç‰ˆæœ¬é…ç½®
â”‚   â”œâ”€â”€ mineru-gpu.json             # GPUç‰ˆæœ¬é…ç½®
â”‚   â”œâ”€â”€ requirements-cpu.txt        # CPUç‰ˆæœ¬ä¾èµ–
â”‚   â””â”€â”€ requirements-gpu.txt        # GPUç‰ˆæœ¬ä¾èµ–
â”‚
â”œâ”€â”€ ğŸ“– æ–‡æ¡£ç›®å½•
â”‚   â””â”€â”€ docs/
â”‚       â”œâ”€â”€ README.md               # é¡¹ç›®è¯´æ˜
â”‚       â”œâ”€â”€ api_interface.md        # APIæ¥å£æ–‡æ¡£
â”‚       â”œâ”€â”€ deployment.md           # éƒ¨ç½²æŒ‡å—
â”‚       â”œâ”€â”€ docker_image_guide.md   # Dockeré•œåƒä½¿ç”¨æŒ‡å—
â”‚       â”œâ”€â”€ docker_deployment_summary.md # Dockeréƒ¨ç½²æ€»ç»“
â”‚       â”œâ”€â”€ gpu_cpu_comparison.md   # GPU/CPUç‰ˆæœ¬å¯¹æ¯”
â”‚       â”œâ”€â”€ final_deployment_summary.md # æœ€ç»ˆéƒ¨ç½²æ€»ç»“
â”‚       â”œâ”€â”€ project_summary.md      # é¡¹ç›®æŠ€æœ¯æ€»ç»“
â”‚       â”œâ”€â”€ office_to_markdown.md   # åŠŸèƒ½è¯´æ˜
â”‚       â””â”€â”€ mineru_official_api_integration.md # MinerUé›†æˆæ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ§ª æµ‹è¯•æ–‡ä»¶
â”‚   â””â”€â”€ test/
â”‚       â”œâ”€â”€ æµ‹è¯•æ–‡æ¡£æ–‡ä»¶ (*.doc, *.docx, *.xlsx, *.pptx, *.pdf)
â”‚       â”œâ”€â”€ mineru_api_test.py       # MinerU APIæµ‹è¯•
â”‚       â”œâ”€â”€ mineru_python_api_test.py # MinerU Python APIæµ‹è¯•
â”‚       â”œâ”€â”€ mineru_official_service.py # MinerUå®˜æ–¹æœåŠ¡æµ‹è¯•
â”‚       â””â”€â”€ test_pdf_conversion.py   # PDFè½¬æ¢æµ‹è¯•
â”‚
â”œâ”€â”€ ğŸ¨ å‰ç«¯é¢„è§ˆ (å¯é€‰)
â”‚   â””â”€â”€ preview_frontend/
â”‚       â”œâ”€â”€ index.html              # ç®€å•çš„Webç•Œé¢
â”‚       â””â”€â”€ server.py               # å‰ç«¯æœåŠ¡å™¨
â”‚
â”œâ”€â”€ ğŸ“ è¿è¡Œæ—¶ç›®å½•
â”‚   â”œâ”€â”€ logs/                       # æ—¥å¿—ç›®å½•
â”‚   â””â”€â”€ temp/                       # ä¸´æ—¶æ–‡ä»¶ç›®å½•
â”‚
â””â”€â”€ ğŸ“„ é¡¹ç›®æ–‡ä»¶
    â””â”€â”€ PROJECT_STRUCTURE.md        # æœ¬æ–‡ä»¶
```

## ğŸ”§ æ ¸å¿ƒç»„ä»¶è¯´æ˜

### åº”ç”¨å±‚ (Application Layer)
- **start.py**: åº”ç”¨å¯åŠ¨å…¥å£ï¼Œæ”¯æŒAPIæœåŠ¡å™¨å’Œæ¼”ç¤ºæ¨¡å¼
- **api/main.py**: FastAPIåº”ç”¨ï¼Œæä¾›RESTful APIæ¥å£

### ä¸šåŠ¡å±‚ (Business Layer)
- **processors/task_processor.py**: å¼‚æ­¥ä»»åŠ¡è°ƒåº¦å™¨ï¼Œç®¡ç†è½¬æ¢ä»»åŠ¡é˜Ÿåˆ—
- **services/document_service.py**: æ–‡æ¡£è½¬æ¢æœåŠ¡ï¼Œé›†æˆLibreOfficeå’ŒMinerU

### éƒ¨ç½²å±‚ (Deployment Layer)
- **Dockeré•œåƒ**: ä¸‰ä¸ªç‰ˆæœ¬ï¼ˆé€šç”¨ã€CPUä¼˜åŒ–ã€GPUåŠ é€Ÿï¼‰
- **Docker Compose**: å¯¹åº”çš„å®¹å™¨ç¼–æ’é…ç½®
- **éƒ¨ç½²è„šæœ¬**: æ™ºèƒ½éƒ¨ç½²å’Œç®¡ç†å·¥å…·

## ğŸ“Š æ–‡ä»¶ç»Ÿè®¡

### ä»£ç æ–‡ä»¶
- Pythonæºç : 6ä¸ªæ–‡ä»¶
- é…ç½®æ–‡ä»¶: 8ä¸ªæ–‡ä»¶
- Dockeræ–‡ä»¶: 8ä¸ªæ–‡ä»¶
- è„šæœ¬æ–‡ä»¶: 2ä¸ªæ–‡ä»¶

### æ–‡æ¡£æ–‡ä»¶
- æŠ€æœ¯æ–‡æ¡£: 9ä¸ªæ–‡ä»¶
- é¡¹ç›®è¯´æ˜: 1ä¸ªæ–‡ä»¶
- æ€»è®¡æ–‡æ¡£: 10ä¸ªæ–‡ä»¶

### æµ‹è¯•æ–‡ä»¶
- æµ‹è¯•è„šæœ¬: 4ä¸ªæ–‡ä»¶
- æµ‹è¯•æ–‡æ¡£: 8ä¸ªæ–‡ä»¶ (å¤šç§æ ¼å¼)

## ğŸš€ éƒ¨ç½²ç‰ˆæœ¬

### 1. é€šç”¨ç‰ˆæœ¬ (document-scheduler:latest)
- **æ–‡ä»¶**: Dockerfile.document-scheduler
- **å¤§å°**: 1.12GB
- **ç‰¹ç‚¹**: ç¨³å®šå¯é ï¼Œç”Ÿäº§éªŒè¯

### 2. CPUä¼˜åŒ–ç‰ˆæœ¬ (document-scheduler:cpu)
- **æ–‡ä»¶**: Dockerfile.cpu
- **å¤§å°**: 1.74GB
- **ç‰¹ç‚¹**: CPUä¼˜åŒ–ï¼Œæ— GPUä¾èµ–

### 3. GPUåŠ é€Ÿç‰ˆæœ¬ (document-scheduler:gpu)
- **æ–‡ä»¶**: Dockerfile.gpu
- **å¤§å°**: é¢„è®¡6-8GB
- **ç‰¹ç‚¹**: GPUåŠ é€Ÿï¼Œé«˜æ€§èƒ½å¤„ç†

## ğŸ“– æ–‡æ¡£ä½“ç³»

### ç”¨æˆ·æ–‡æ¡£
1. **README.md** - é¡¹ç›®æ¦‚è§ˆå’Œå¿«é€Ÿå¼€å§‹
2. **deployment.md** - è¯¦ç»†éƒ¨ç½²æŒ‡å—
3. **docker_image_guide.md** - Dockerä½¿ç”¨æŒ‡å—

### æŠ€æœ¯æ–‡æ¡£
1. **api_interface.md** - å®Œæ•´APIæ–‡æ¡£
2. **project_summary.md** - æŠ€æœ¯æ¶æ„æ€»ç»“
3. **gpu_cpu_comparison.md** - ç‰ˆæœ¬å¯¹æ¯”åˆ†æ

### éƒ¨ç½²æ–‡æ¡£
1. **docker_deployment_summary.md** - Dockeréƒ¨ç½²æ€»ç»“
2. **final_deployment_summary.md** - æœ€ç»ˆéƒ¨ç½²æ€»ç»“

## ğŸ› ï¸ å¼€å‘å·¥å…·

### éƒ¨ç½²å·¥å…·
- **deploy.sh**: æ™ºèƒ½éƒ¨ç½²è„šæœ¬ï¼Œæ”¯æŒç‰ˆæœ¬é€‰æ‹©
- **export_image.sh**: é•œåƒå¯¼å‡ºå’Œæ‰“åŒ…å·¥å…·

### é…ç½®ç®¡ç†
- **.env.example**: ç¯å¢ƒå˜é‡æ¨¡æ¿
- **mineru-*.json**: ä¸åŒç‰ˆæœ¬çš„MinerUé…ç½®

## ğŸ§ª æµ‹è¯•è¦†ç›–

### åŠŸèƒ½æµ‹è¯•
- APIæ¥å£æµ‹è¯•
- æ–‡æ¡£è½¬æ¢æµ‹è¯•
- æ‰¹é‡å¤„ç†æµ‹è¯•

### é›†æˆæµ‹è¯•
- MinerUé›†æˆæµ‹è¯•
- Dockerå®¹å™¨æµ‹è¯•
- éƒ¨ç½²è„šæœ¬æµ‹è¯•

## ğŸ“ˆ é¡¹ç›®ç‰¹ç‚¹

### æ¶æ„è®¾è®¡
- **åˆ†å±‚æ¶æ„**: æ¸…æ™°çš„APIã€ä¸šåŠ¡ã€æœåŠ¡åˆ†å±‚
- **å¼‚æ­¥å¤„ç†**: åŸºäºasyncioçš„é«˜å¹¶å‘å¤„ç†
- **æ¨¡å—åŒ–**: æ¾è€¦åˆçš„ç»„ä»¶è®¾è®¡

### éƒ¨ç½²çµæ´»æ€§
- **å¤šç‰ˆæœ¬æ”¯æŒ**: GPU/CPU/é€šç”¨ä¸‰ä¸ªç‰ˆæœ¬
- **æ™ºèƒ½éƒ¨ç½²**: è‡ªåŠ¨æ£€æµ‹å’Œç‰ˆæœ¬é€‰æ‹©
- **å®¹å™¨åŒ–**: å®Œæ•´çš„DockeråŒ–éƒ¨ç½²

### æ–‡æ¡£å®Œå–„
- **å…¨é¢è¦†ç›–**: ä»æŠ€æœ¯åˆ°ä½¿ç”¨çš„å®Œæ•´æ–‡æ¡£
- **å¤šå±‚æ¬¡**: æ¦‚è§ˆã€è¯¦ç»†ã€å‚è€ƒä¸‰ä¸ªå±‚æ¬¡
- **å®ç”¨æ€§**: åŒ…å«ç¤ºä¾‹å’Œæœ€ä½³å®è·µ

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### å¿«é€Ÿå¼€å§‹
```bash
# è‡ªåŠ¨é€‰æ‹©æœ€ä½³ç‰ˆæœ¬å¯åŠ¨
./deploy.sh start auto

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
./deploy.sh health
```

### å¼€å‘æ¨¡å¼
```bash
# æœ¬åœ°å¼€å‘
python start.py

# æˆ–å¯åŠ¨æ¼”ç¤º
python start.py demo
```

### ç”Ÿäº§éƒ¨ç½²
```bash
# æ£€æŸ¥GPUæ”¯æŒ
./deploy.sh gpu-check

# å¯åŠ¨å¯¹åº”ç‰ˆæœ¬
./deploy.sh start gpu  # æˆ– cpu
```

è¿™ä¸ªé¡¹ç›®ç»“æ„æä¾›äº†å®Œæ•´çš„ä¼ä¸šçº§æ–‡æ¡£è½¬æ¢è§£å†³æ–¹æ¡ˆï¼Œä»å¼€å‘åˆ°éƒ¨ç½²çš„å…¨æµç¨‹æ”¯æŒã€‚
